(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){e.exports=a(162)},108:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(28),o=a.n(s),l=(a(108),a(109),a(110),a(111),a(12)),i=a(13),c=a(16),u=a(14),p=a(15),m=a(163),d=a(27),h=a(164),f=a(165),g=a(166),b=a(167),y=a(168),E=a(169),v=a(170),O=a(171),j=a(176),k=a(172),P=a(173),R=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggle=a.toggle.bind(Object(d.a)(a)),a.state={isOpen:!1},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return r.a.createElement(m.a,{className:"header"},r.a.createElement(h.a,{color:"light",light:!0,expand:"md"},r.a.createElement(f.a,{href:"/"},"ADAS"),r.a.createElement(g.a,{onClick:this.toggle}),r.a.createElement(b.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(y.a,{className:"ml-auto",navbar:!0},r.a.createElement(E.a,null,r.a.createElement(v.a,{href:"/components/",disabled:!0},"Components")),r.a.createElement(O.a,{nav:!0,inNavbar:!0},r.a.createElement(j.a,{nav:!0,caret:!0},"Options"),r.a.createElement(k.a,{right:!0},r.a.createElement(P.a,null,"Option 1"),r.a.createElement(P.a,null,"Option 2"),r.a.createElement(P.a,{divider:!0}),r.a.createElement(P.a,null,"Reset")))))))}}]),t}(n.Component),V=a(52),w=a(24),S=a(30),C=a.n(S),F=function(e,t){return function(a){a({type:"Play/Pause"}),t.realtime&&(e.isPlaying?C.a.get("http://localhost:5000/ondevice/pause").then(function(e){console.log(e.data.status)}):C.a.get("http://localhost:5000/ondevice/play").then(function(e){console.log(e.data.status),a({type:"setSources"})}))}},N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggle=a.toggle.bind(Object(d.a)(a)),a.handleClickUpload=a.handleClickUpload.bind(Object(d.a)(a)),a.handleRealTime=a.handleRealTime.bind(Object(d.a)(a)),a.state={dropdownOpen:!1},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"toggle",value:function(){this.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})}},{key:"handleClickUpload",value:function(){this.props.renderUploadForm()}},{key:"handleRealTime",value:function(){this.props.realTime()}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(V.a,{id:"ddtoggle",style:{margin:10,width:200},isOpen:this.state.dropdownOpen,toggle:this.toggle},r.a.createElement(j.a,{style:{width:200},caret:!0},"Options"),r.a.createElement(k.a,null,r.a.createElement(P.a,{onClick:this.handleRealTime},"Real Time SelfCam"),r.a.createElement(P.a,{onClick:this.handleClickUpload,id:"fileUploadButton"},"File Upload"),r.a.createElement(P.a,{divider:!0}),r.a.createElement(P.a,{disabled:!0},"Real Time"))))}}]),t}(n.Component),T=Object(w.b)(null,{renderUploadForm:function(e){return function(e){e({type:"resetRealTime"}),e({type:"uploadform",payload:{display:!0,uploadform:!0}})}},realTime:function(){return function(e){F({isPlaying:!1},{realtime:!0})(e),e({type:"realTime",payload:"Playing"}),e({type:"resetFormAll"})}}})(N),D=a(174),B=a(175),U=a(31),_=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.realtime.realtime||(this.props.source!==e.source&&(console.log(this.props.source+e.source),this.source=e.source,this.videoDataV.load()),this.props.playback!==e.playback&&(e.playback.isStopped?this.videoDataV.load():e.playback.isPlaying?this.videoDataV.play():this.videoDataV.pause()))}},{key:"render",value:function(){var e=this,t=r.a.createElement("img",{style:{minHeight:620},id:"videoData",src:this.props.realtime.datasource,ref:function(t){return e.videoDataI=t}}),a=r.a.createElement(U.Player,{ref:function(t){return e.videoDataV=t}},r.a.createElement("source",{src:this.source}),r.a.createElement(U.BigPlayButton,{position:"center"}));return r.a.createElement(n.Fragment,null,this.props.realtime.realtime?t:a)}}]),t}(n.Component),x=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.realtime.realtime||(this.props.source!==e.source&&(this.source=e.source,this.processedVideoP.load()),this.props.playback!==e.playback&&(e.playback.isStopped?this.processedVideoP.load():e.playback.isPlaying?this.processedVideoP.play():this.processedVideoP.pause()))}},{key:"render",value:function(){var e=this,t=(r.a.createElement("img",{style:{minHeight:360},id:"processedVideo",src:this.props.realtime.outputsource,ref:function(t){return e.processedVideoI=t}}),r.a.createElement(U.Player,{ref:function(t){return e.processedVideoP=t}},r.a.createElement("source",{src:this.source}),r.a.createElement(U.BigPlayButton,{position:"center"})));return r.a.createElement(n.Fragment,null,this.props.realtime.realtime?"":t)}}]),t}(n.Component),W=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.realtime.realtime||(this.props.source!==e.source&&(this.source=e.source,this.sourceVideoP.load()),this.props.playback!==e.playback&&(e.playback.isStopped?this.sourceVideoP.load():e.playback.isPlaying?this.sourceVideoP.play():this.sourceVideoP.pause()))}},{key:"render",value:function(){var e=this,t=(r.a.createElement("img",{style:{minHeight:360},id:"sourceVideo",src:this.props.realtime.inputsource,ref:function(t){return e.sourceVideoI=t}}),r.a.createElement(U.Player,{ref:function(t){return e.sourceVideoP=t}},r.a.createElement("source",{src:this.source}),r.a.createElement(U.BigPlayButton,{position:"center"})));return r.a.createElement(n.Fragment,null,this.props.realtime.realtime?"":t)}}]),t}(n.Component),A=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.process!==e.process&&(this.dataVideo="http://localhost:5000"+e.process.dataVideo,this.originalVideo="http://localhost:5000"+e.process.originalVideo,this.processedVideo="http://localhost:5000"+e.process.processedVideo)}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(D.a,null,r.a.createElement(B.a,{style:{marginTop:10},className:"text-center"},r.a.createElement(_,{realtime:this.props.realtime,playback:this.props.playback,source:this.dataVideo}))),r.a.createElement(D.a,null,r.a.createElement(B.a,{style:{marginTop:10}},r.a.createElement(W,{realtime:this.props.realtime,playback:this.props.playback,source:this.originalVideo})),r.a.createElement(B.a,{style:{marginTop:10}},r.a.createElement(x,{realtime:this.props.realtime,playback:this.props.playback,source:this.processedVideo}))))}}]),t}(n.Component),I=Object(w.b)(function(e){return{file:e.File,playback:e.Playback,process:e.Processing,realtime:e.RealTime}})(A),H=a(56),J=a.n(H),M=a(57),$=a.n(M),q=a(40),z=a.n(q),G=a(58),K=a.n(G),L=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement(D.a,null,r.a.createElement(B.a,{md:"2"}),r.a.createElement(B.a,{md:"1"},r.a.createElement("button",{onClick:function(t){return e.props.stop(e.props.realtime)},className:"btn"},r.a.createElement("img",{className:"playback-btn",src:z.a,alt:"Stop Rec"}))),r.a.createElement(B.a,{md:"1"},r.a.createElement("button",{onClick:function(t){return e.props.record(e.props.realtime)},className:"btn"},r.a.createElement("img",{className:"playback-btn",src:K.a,alt:this.props.status.isRecording?"Pause":"Record"}))),r.a.createElement(B.a,{md:"4",className:"text-center"},this.props.status.isRecording?"Recording":""),r.a.createElement(B.a,{md:"1"},r.a.createElement("button",{onClick:function(t){return e.props.togglePlayPause(e.props.status,e.props.realtime)},className:"btn"},r.a.createElement("img",{className:"playback-btn",src:this.props.status.isPlaying?$.a:J.a,alt:this.props.status.isPlaying?"Pause":"Play"}))),r.a.createElement(B.a,{md:"1"},r.a.createElement("button",{onClick:function(t){return e.props.stop(e.props.realtime)},className:"btn"},r.a.createElement("img",{className:"playback-btn",src:z.a,alt:"Stop"}))),r.a.createElement(B.a,{md:"2"}));r.a.createElement(D.a,null,r.a.createElement(B.a,{md:"2"}),r.a.createElement(B.a,{md:"1"},r.a.createElement("button",{onClick:function(t){return e.props.stop(t)},className:"btn"},r.a.createElement("img",{className:"playback-btn",src:z.a,alt:"Stop Rec"}))),r.a.createElement(B.a,{md:"1"},r.a.createElement("button",{onClick:function(t){return e.props.record(t)},className:"btn"},r.a.createElement("img",{className:"playback-btn",src:K.a,alt:this.props.status.isRecording?"Pause":"Record"}))),r.a.createElement(B.a,{md:"4",className:"text-center"},this.props.status.isRecording?"Recording":""),r.a.createElement(B.a,{md:"1"},r.a.createElement("button",{onClick:function(t){return e.props.togglePlayPause(t)},className:"btn"},r.a.createElement("img",{className:"playback-btn",src:this.props.status.isPlaying?$.a:J.a,alt:this.props.status.isPlaying?"Pause":"Play"}))),r.a.createElement(B.a,{md:"1"},r.a.createElement("button",{onClick:function(t){return e.props.stop(t)},className:"btn"},r.a.createElement("img",{className:"playback-btn",src:z.a,alt:"Stop"}))),r.a.createElement(B.a,{md:"2"}));return r.a.createElement(n.Fragment,null,(this.props.realtime.realtime,t))}}]),t}(n.Component),Q=Object(w.b)(function(e){return{status:e.Playback,realtime:e.RealTime}},{togglePlayPause:F,record:function(e){return function(t){t({type:"Record"}),e.realtime&&C.a.get("http://localhost:5000/ondevice/record").then(function(e){console.log(e.data.status)})}},stop:function(e){return function(t){t({type:"Stop"}),e.realtime&&C.a.get("http://localhost:5000/ondevice/stop").then(function(e){console.log(e.data.status),t({type:"resetSource"})})}}})(L),X=function(){return function(e){e({type:"startedprocess"})}},Y=function(e){return function(t){e.error||t({type:"processDone",payload:e}),e.error&&t({type:"errorProcessing",payload:e})}},Z=a(36),ee=a.n(Z),te=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onFormSubmit=a.onFormSubmit.bind(Object(d.a)(a)),a.loading=r.a.createElement("img",{style:{width:45},src:ee.a}),a.state={loading:!1},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"onFormSubmit",value:function(e){e.preventDefault(),this.setState(function(){return{loading:!0}}),this.props.file.file&&this.props.fileupload(this.props.file.file)}},{key:"componentWillReceiveProps",value:function(){this.props.file.message&&this.setState(function(){return{loading:!1}})}},{key:"render",value:function(){return r.a.createElement("div",{id:"form"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},this.props.file.message?this.props.file.message:this.state.loading?this.loading:""),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{id:"fileUpload",type:"file",onChange:this.props.change})),r.a.createElement("button",{onClick:this.onFormSubmit,className:"btn btn-success",type:"submit"},"Upload")))}}]),t}(n.Component),ae=Object(w.b)(function(e){return{file:e.File}},{change:function(e){return function(t){console.log(e.target.files),t({type:"change",payload:e.target.files[0]})}},fileupload:function(e){return function(t){var a=new FormData;a.append("file",e),C.a.post("http://localhost:5000/apiv1/upload",a,{headers:{"content-type":"multipart/form-data"}}).then(function(e){var a;t({type:"fileupload",payload:{file:e.data.filename,success:e.data.status}}),e.data.status&&(t({type:"resetAll"}),t({type:"resetFormAll"}),(a={filename:e.data.filename},function(e){X()(e);var t="http://localhost:5000/apiv1/startProcess/"+a.filename;C.a.get(t).then(function(t){console.log(t),Y(t.data)(e)})})(t))}).catch(function(e){console.log(e.message),t({type:"fileupload",payload:{form:!0,success:!1,message:e.message}})})}}})(te),ne=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).form=null,a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.forms.uploadform&&(this.form=r.a.createElement(ae,null))}},{key:"componentDidUpdate",value:function(){this.props.forms.uploadform&&(this.form=r.a.createElement(ae,null))}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,this.props.forms.display?this.form:"")}}]),t}(n.Component),re=Object(w.b)(function(e){return{file:e.File,forms:e.Forms}})(ne),se=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.realtime.realtime?this.message=e.realtime.message:this.message=e.processing.message}},{key:"render",value:function(){var e=r.a.createElement("div",{className:"messageBar"},r.a.createElement("p",null,r.a.createElement("img",{style:{width:45},src:this.props.processing.icon}),this.message));return r.a.createElement(n.Fragment,null,this.props.realtime.realtime?"":e)}}]),t}(n.Component),oe=Object(w.b)(function(e){return{processing:e.Processing,realtime:e.RealTime}},null)(se),le=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(R,null),r.a.createElement(m.a,null,r.a.createElement(T,null),r.a.createElement(re,null),r.a.createElement(oe,null),r.a.createElement(I,null),r.a.createElement(Q,null)))}}]),t}(n.Component),ie=a(29),ce=a(101),ue=a(102),pe=a(21),me={isPlaying:!1,isRecording:!1,isStopped:!0},de={form:!1,file:null,success:!1,message:null},he={display:!1,uploadform:!1},fe={message:null,status:null,originalVideo:null,processedVideo:null,dataVideo:null},ge={display:!1,message:null,icon:null},be={realtime:!1,message:null},ye=Object(ie.combineReducers)({Playback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me;switch((arguments.length>1?arguments[1]:void 0).type){case"Play/Pause":return Object(pe.a)({},e,{isPlaying:!e.isPlaying,isStopped:!1});case"Stop":return Object(pe.a)({},e,{isPlaying:!1,isRecording:!1,isStopped:!0});case"Record":return Object(pe.a)({},e,{isRecording:!0,isStopped:!1,isPlaying:!0});default:return e}},File:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"change":return Object(pe.a)({},e,{file:t.payload});case"fileupload":return Object(pe.a)({},e,{success:t.payload.success,file:t.payload.file,message:t.payload.message});default:return e}},Forms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"uploadform":return Object(pe.a)({},e,{display:t.payload.display,uploadform:t.payload.uploadform});case"resetFormAll":return Object(pe.a)({},he);default:return e}},Processing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"resetState":return{message:null,status:null,originalVideo:null,processedVideo:null,dataVideo:null};case"startedprocess":return Object(pe.a)({},e,{message:"Processing",icon:ee.a,status:0});case"processDone":return Object(pe.a)({},e,{message:t.payload.message,icon:null,status:t.payload.status,originalVideo:t.payload.original_file_url,processedVideo:t.payload.output_video_url,dataVideo:t.payload.data_url});case"errorProcessing":return Object(pe.a)({},e,{message:t.payload.message,status:0});default:return e}},MessageBar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge;switch((arguments.length>1?arguments[1]:void 0).type){case"processing":return Object(pe.a)({},e,{display:!0,message:"Processing Started",icon:ee.a});case"processingDone":return Object(pe.a)({},e,{display:!0,message:"Processing Finished",icon:null});default:return e}},RealTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"realTime":return Object(pe.a)({},e,{realtime:!0,message:t.payload.message});case"setSources":return Object(pe.a)({},e,{datasource:"http://localhost:5000/ondevice/view_final_img",inputsource:"http://localhost:5000/ondevice/input_video_viewer",outputsource:"http://localhost:5000/ondevice/output_video_viewer"});case"resetSource":return Object(pe.a)({},e,{datasource:null});case"resetRealTime":return be;default:return e}}}),Ee=[ue.a],ve=Object(ie.createStore)(ye,{},Object(ce.composeWithDevTools)(ie.applyMiddleware.apply(void 0,Ee)));var Oe=function(){return r.a.createElement(w.a,{store:ve},r.a.createElement(le,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},36:function(e,t,a){e.exports=a.p+"static/media/loading.127c59b6.gif"},40:function(e,t,a){e.exports=a.p+"static/media/Stop.37767778.ico"},56:function(e,t,a){e.exports=a.p+"static/media/Play.15612237.ico"},57:function(e,t,a){e.exports=a.p+"static/media/Pause.81307bbb.ico"},58:function(e,t,a){e.exports=a.p+"static/media/Record.5dd51735.ico"}},[[103,1,2]]]);
//# sourceMappingURL=main.0a4f2ae8.chunk.js.map